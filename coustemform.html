<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Recipe Form - FlavorCraft</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="menu">
        <a href="indxex.html" class="logo-link"><h1>üç≥ FlavorCraft</h1></a>
        <a href="indxex.html" class="home">Home</a>
        <a href="recipe.html" class="recipe">Recipe</a>
        <a href="about.html" class="about">About</a>
        <a href="contact.html" class="contact">Contact</a>
        <a href="coustem.html" class="coustem">Custom recipe</a>
    </div>

    <!-- First Form - Personal Information -->
    <div class="form-container" id="personalForm">
        <div class="form-card">
            <h2>Personal Information</h2>
            <form id="personalInfoForm">
                <div class="form-group">
                    <label for="firstName">First Name:</label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name:</label>
                    <input type="text" id="lastName" name="lastName" required>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-cancel" onclick="goBack()">Cancel</button>
                    <button type="button" class="btn btn-next" onclick="showRecipeForm()">Next</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Second Form - Recipe Information -->
    <div class="form-container" id="recipeForm" style="display: none;">
        <div class="form-card">
            <h2>Recipe Details</h2>
            <form id="recipeInfoForm">
                <div class="form-group">
                    <label for="recipeName">Recipe Name:</label>
                    <input type="text" id="recipeName" name="recipeName" required>
                </div>
                <div class="form-group">
                    <label for="recipeEmoji">Recipe Emoji:</label>
                    <input type="text" id="recipeEmoji" name="recipeEmoji" placeholder="üç≥" maxlength="2">
                </div>
                <div class="form-group">
                    <label for="ingredients">Ingredients:</label>
                    <textarea id="ingredients" name="ingredients" rows="4" placeholder="List your ingredients here..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="instructions">Instructions:</label>
                    <textarea id="instructions" name="instructions" rows="6" placeholder="Describe how to make this recipe..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="cookingTime">Cooking Time (minutes):</label>
                    <input type="number" id="cookingTime" name="cookingTime" min="1" required>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-cancel" onclick="goBack()">Cancel</button>
                    <button type="button" class="btn btn-submit" onclick="submitRecipe()">Submit Recipe</button>
                </div>
            </form>
        </div>
    </div>
    <div class="footer-section">
        <h4>Connect With Us</h4>
        <a href="mailto:hello@flavorcraft.com">üìß Email Us</a>
        <a href="tel:+923296993831">üì± Call Us</a>
        <a href="https://www.facebook.com/profile.php?id=61580171736629" target="_blank">üìò Facebook</a>
        <a href="https://instagram.com/flavorcraft_recipes" target="_blank">üì∑ Instagram</a>
    </div>
    <script>
    // Function to show recipe form
    function showRecipeForm() {
        // Validate personal form first
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        
        if (!firstName || !lastName) {
            alert('Please fill in both first name and last name.');
            return;
        }
        
        document.getElementById('personalForm').style.display = 'none';
        document.getElementById('recipeForm').style.display = 'block';
    }

    // Function to go back to personal form
    function showPersonalForm() {
        document.getElementById('personalForm').style.display = 'block';
        document.getElementById('recipeForm').style.display = 'none';
    }

    // Function to go back to coustem page
    function goBack() {
        window.location.href = 'coustem.html';
    }

    // Function to submit recipe
    function submitRecipe() {
        // Validate recipe form
        const recipeName = document.getElementById('recipeName').value.trim();
        const ingredients = document.getElementById('ingredients').value.trim();
        const instructions = document.getElementById('instructions').value.trim();
        const cookingTime = document.getElementById('cookingTime').value;
        
        if (!recipeName || !ingredients || !instructions || !cookingTime) {
            alert('Please fill in all required fields.');
            return;
        }
        
        // Get personal info
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const recipeEmoji = document.getElementById('recipeEmoji').value.trim() || 'üç≥';
        
        // Get logged in user's email
        const sessionData = localStorage.getItem('userSession') || sessionStorage.getItem('userSession');
        const loggedInUser = sessionData ? JSON.parse(sessionData) : null;
        
        // Create recipe object
        const recipe = {
            id: Date.now(), // Unique ID based on timestamp
            userEmail: loggedInUser ? loggedInUser.email : null, // Associate recipe with user
            personalInfo: {
                firstName: firstName,
                lastName: lastName
            },
            recipeInfo: {
                name: recipeName,
                emoji: recipeEmoji,
                ingredients: ingredients,
                instructions: instructions,
                cookingTime: cookingTime
            },
            dateCreated: new Date().toLocaleDateString()
        };
        
        // Save recipe to localStorage
        let recipes = JSON.parse(localStorage.getItem('customRecipes') || '[]');
        recipes.push(recipe);
        localStorage.setItem('customRecipes', JSON.stringify(recipes));
        
        console.log('Recipe submitted:', recipe);
        
        // Show success message
        alert('Recipe submitted successfully! Thank you for sharing your recipe.');
        
        // Go back to coustem page
        goBack();
    }

    // Check if user is logged in
    function checkUserLogin() {
        const sessionData = localStorage.getItem('userSession') || sessionStorage.getItem('userSession');
        if (!sessionData) {
            alert('Please login first to add recipes!');
            window.location.href = 'coustem.html';
            return false;
        }
        return true;
    }

    // Check login when page loads
    document.addEventListener('DOMContentLoaded', function() {
        checkUserLogin();
    });
    </script>
</body>
</html>
